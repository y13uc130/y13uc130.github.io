(window.webpackJsonppikx=window.webpackJsonppikx||[]).push([[3],{97:function(t,e,a){},98:function(t,e,a){"use strict";(function(t){function n(t){t=Math.round(t);for(var e=(t+="").split("."),a=e[0],n=e.length>1?","+e[1]:"",r=/(\d+)(\d{3})/;r.test(a);)a=a.replace(r,"$1,$2");return a+n}a.d(e,"a",(function(){return n}))}).call(this,a(34))},99:function(t,e,a){"use strict";a.r(e);var n=a(6),r=a(7),i=a(9),c=a(8),s=a(10),l=a(0),o=a.n(l),d=(a(97),a(3)),m=a(11),u=a(19),h=a(17),f=(a(33),a(25),a(15)),p=a.n(f),v=a(98),g=a(39),b=a(35),C=a(38),y=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(i.a)(this,Object(c.a)(e).call(this,t))).handleAddClick=function(t){var e=t.name,n=t._id,r=t.price,i=t.offerPrice,c=t.image,s=t.type;a.state.noItemAdded&&a.setState({noItemAdded:!1});var l={name:e,_id:n,offerPrice:i?parseInt(i):0,price:parseInt(r),count:1,image:c,type:s},o=l.offerPrice?l.offerPrice:l.price;a.setState({totalPayable:a.state.totalPayable+o}),a.setState({addBtnChange:[].concat(Object(u.a)(a.state.addBtnChange),[n]),cart_items:[].concat(Object(u.a)(a.state.cart_items),[l]),totalCartItems:a.state.totalCartItems+1})},a.handleRemoveItem=function(t){var e=Object(u.a)(a.state.cart_items),n=0;e=e.filter((function(e){if(e._id===t._id){if(--e.count,n=e.offerPrice?e.offerPrice:e.price,0===e.count){var r=Object(u.a)(a.state.addBtnChange);return(r=r.filter((function(e){return e!==t._id})))&&!r.length&&a.setState({noItemAdded:!0,cart_items:[]}),void a.setState({addBtnChange:r})}return e}return e})),a.setState({cart_items:e,totalCartItems:a.state.totalCartItems-1,totalPayable:a.state.totalPayable-n})},a.handleAddOneMore=function(t){var e=Object(u.a)(a.state.cart_items),n=0;e=e.map((function(e){return e._id===t._id&&(e.count=e.count+1,n=e.offerPrice?e.offerPrice:e.price),e})),a.setState({cart_items:e,totalCartItems:a.state.totalCartItems+1,totalPayable:a.state.totalPayable+n})},a.handleCart=function(){var t=a.state,e=t.cart_items,n=t.totalPayable,r=t.totalCartItems,i=a.props.history;a.props.addToCartAction(e,n,r),i.push("/checkout/cart")},a.renderEachDishItem=function(t,e){var n=a.state,r=n.cart_items,i=n.addBtnChange;return o.a.createElement(C.a,{dish:e,cart_items:r,handleAddClick:a.handleAddClick,handleAddOneMore:a.handleAddOneMore,handleRemoveItem:a.handleRemoveItem,index:t,addBtnChange:i})},a.state={addBtnChange:[],cart_items:[],noItemAdded:!0,totalCartItems:0,totalPayable:0,loading:!1},a}return Object(s.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.cart_items,a=t.totalPayable,n=t.totalCartItems;if(e&&e.length){this.setState({loading:!0});var r=[];e.map((function(t){return r.push(t._id),t})),this.setState({addBtnChange:this.state.addBtnChange.concat(r),cart_items:e,totalPayable:a,noItemAdded:!1,totalCartItems:n,loading:!1})}}},{key:"render",value:function(){var t=this,e=this.state,a=e.noItemAdded,n=e.totalCartItems,r=e.totalPayable,i=e.loading,c=(e.addBtnChange,this.props.data);return i?o.a.createElement(b.a,null):o.a.createElement("div",{className:"MenuPage"},o.a.createElement("div",{className:"Categories"},Array.isArray(c)&&!!c.length&&c.map((function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"EachCategory"},o.a.createElement("div",{className:"h2"},e._id),o.a.createElement("div",{className:"borderBottom"}),o.a.createElement("div",{className:"dishItems"},e.dish.map((function(e,a){return o.a.createElement(o.a.Fragment,null,t.renderEachDishItem(a,e))})))),o.a.createElement("div",{className:"borderLine"}))}))),o.a.createElement("div",{className:p()("cart-preview cartDesign layout",!a&&"showcartpreview")},o.a.createElement("div",{className:"flex xs7"},o.a.createElement("div",{className:"layout"},o.a.createElement("div",{className:"pa3-white bold itemCount"},n," Items"),o.a.createElement("div",{className:"flex xs1 PipeBtwText layout align-center justify-center"},"|"),o.a.createElement("div",{className:"totalPayable pa3-white bold"},"\u20b9",Object(v.a)(r))),o.a.createElement("div",{className:"pa5-white bold"},"From: ","Shagi House")),o.a.createElement("div",{onClick:this.handleCart,className:"flex xs5 layout justify-end align-center"},o.a.createElement("div",{className:"pa2-white bold m-r-10"},"VIEW CART"),o.a.createElement("div",{className:"pikx-sprite cart-icon"}))))}}]),e}(l.Component),I=Object(m.d)(d.g,Object(h.c)((function(t){var e=t.menuPage;return{cart_items:e.cart_items||[],totalPayable:e.totalPayable||0,totalCartItems:e.totalCartItems||0}}),{addToCartAction:g.a}))(y),E=a(40);a.d(e,"Home",(function(){return P}));var P=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(i.a)(this,Object(c.a)(e).call(this,t))).state={loading:!1,menuData2:[]},a}return Object(s.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this;document.title="PIKX";var e=this.props.history;this.setState({loading:!0}),localStorage.getItem("booking_id")?E.a.get("/restaurant/menu").then((function(e){e&&e.data&&e.data.success&&Array.isArray(e.data.result)&&e.data.result.length&&t.setState({menuData2:e.data.result}),t.setState({loading:!1})})).catch((function(e){console.log(e),t.setState({loading:!1})})):(e.push("/error"),this.setState({loading:!1}))}},{key:"render",value:function(){var t=this.state,e=t.loading,a=t.menuData2;return o.a.createElement("div",{className:"HomePage"},!!e&&o.a.createElement(b.a,null),o.a.createElement(I,{data:a}))}}]),e}(l.PureComponent);e.default=Object(m.d)(d.g)(P)}}]);
//# sourceMappingURL=3.3a9167da.chunk.js.map