(window.webpackJsonppikx=window.webpackJsonppikx||[]).push([[3],{100:function(t,e,a){},101:function(t,e,a){"use strict";(function(t){function n(t){t=Math.round(t);for(var e=(t+="").split("."),a=e[0],n=e.length>1?","+e[1]:"",r=/(\d+)(\d{3})/;r.test(a);)a=a.replace(r,"$1,$2");return a+n}a.d(e,"a",(function(){return n}))}).call(this,a(37))},102:function(t,e,a){"use strict";a.r(e);var n=a(3),r=a(4),c=a(6),s=a(5),i=a(7),o=a(0),l=a.n(o),d=(a(100),a(8)),m=a(11),u=a(21),h=a(18),f=(a(36),a(27),a(15)),v=a.n(f),b=a(101),g=a(42),p=a(38),y=a(41),C=a(17),I=a(19),O=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(c.a)(this,Object(s.a)(e).call(this,t))).handleAddClick=function(t){var e=t.name,n=t._id,r=t.price,c=t.offerPrice,s=t.image,i=t.type;a.state.noItemAdded&&a.setState({noItemAdded:!1});var o={name:e,_id:n,offerPrice:c?parseInt(c):0,price:parseInt(r),count:1,image:s,type:i},l=o.offerPrice?o.offerPrice:o.price;a.setState({totalPayable:a.state.totalPayable+l}),a.setState({addBtnChange:[].concat(Object(u.a)(a.state.addBtnChange),[n]),cart_items:[].concat(Object(u.a)(a.state.cart_items),[o]),totalCartItems:a.state.totalCartItems+1}),setTimeout((function(){var t=a.state,e=t.cart_items,n=t.totalPayable,r=t.totalCartItems;a.setDataOnLocalStorage(e,n,r)}),100)},a.handleRemoveItem=function(t){var e=Object(u.a)(a.state.cart_items),n=0;e=e.filter((function(e){if(e._id===t._id){if(--e.count,n=e.offerPrice?e.offerPrice:e.price,0===e.count){var r=Object(u.a)(a.state.addBtnChange);return(r=r.filter((function(e){return e!==t._id})))&&!r.length&&a.setState({noItemAdded:!0,cart_items:[]}),void a.setState({addBtnChange:r})}return e}return e})),a.setState({cart_items:e,totalCartItems:a.state.totalCartItems-1,totalPayable:a.state.totalPayable-n}),setTimeout((function(){var t=a.state,e=t.cart_items,n=t.totalPayable,r=t.totalCartItems;a.setDataOnLocalStorage(e,n,r)}),100)},a.handleAddOneMore=function(t){var e=Object(u.a)(a.state.cart_items),n=0;e=e.map((function(e){return e._id===t._id&&(e.count=e.count+1,n=e.offerPrice?e.offerPrice:e.price),e})),a.setState({cart_items:e,totalCartItems:a.state.totalCartItems+1,totalPayable:a.state.totalPayable+n}),setTimeout((function(){var t=a.state,e=t.cart_items,n=t.totalPayable,r=t.totalCartItems;a.setDataOnLocalStorage(e,n,r)}),100)},a.handleCart=function(){var t=a.state,e=t.cart_items,n=t.totalPayable,r=t.totalCartItems,c=a.props.history;a.props.addToCartAction(e,n,r),a.setDataOnLocalStorage(e,n,r),c.push(C.a.cartPath)},a.renderEachDishItem=function(t,e){var n=a.state,r=n.cart_items,c=n.addBtnChange;return l.a.createElement(y.a,{dish:e,cart_items:r,handleAddClick:a.handleAddClick,handleAddOneMore:a.handleAddOneMore,handleRemoveItem:a.handleRemoveItem,index:t,addBtnChange:c})},a.state={addBtnChange:[],cart_items:[],noItemAdded:!0,totalCartItems:0,totalPayable:0,loading:!1},a}return Object(i.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.cart_items,a=t.totalPayable,n=t.totalCartItems;if(e&&e.length)this.mapDataToState(e,a,n);else{var r=Object(I.c)(),c=Object(I.d)(),s=Object(I.e)();this.mapDataToState(r,s,c)}}},{key:"setDataOnLocalStorage",value:function(t,e,a){Object(I.f)(t),Object(I.g)(e),Object(I.h)(a)}},{key:"mapDataToState",value:function(t,e,a){this.setState({loading:!0});var n=[];t&&t.map((function(t){return n.push(t._id),t})),this.setState({addBtnChange:this.state.addBtnChange.concat(n),cart_items:t,totalPayable:e,noItemAdded:!1,totalCartItems:a,loading:!1})}},{key:"render",value:function(){var t=this,e=this.state,a=e.noItemAdded,n=e.totalCartItems,r=e.totalPayable,c=e.loading,s=(e.addBtnChange,this.props.data);return c?l.a.createElement(p.a,null):l.a.createElement("div",{className:"MenuPage"},l.a.createElement("div",{className:"Categories"},Array.isArray(s)&&!!s.length&&s.map((function(e,a){return l.a.createElement(l.a.Fragment,{key:a},l.a.createElement("div",{className:"EachCategory"},l.a.createElement("div",{className:"h2"},e._id),l.a.createElement("div",{className:"borderBottom"}),l.a.createElement("div",{className:"dishItems"},e.dish.map((function(e,a){return l.a.createElement(l.a.Fragment,{key:a},t.renderEachDishItem(a,e))})))),l.a.createElement("div",{className:"borderLine"}))}))),l.a.createElement("div",{className:v()("cart-preview cartDesign layout",!a&&"showcartpreview")},l.a.createElement("div",{className:"flex xs7"},l.a.createElement("div",{className:"layout"},l.a.createElement("div",{className:"pa3-white bold itemCount"},n," Items"),l.a.createElement("div",{className:"flex xs1 PipeBtwText layout align-center justify-center"},"|"),l.a.createElement("div",{className:"totalPayable pa3-white bold"},"\u20b9",Object(b.a)(r))),l.a.createElement("div",{className:"pa5-white bold"},"From: ","Shagi House")),l.a.createElement("div",{onClick:this.handleCart,className:"flex xs5 layout justify-end align-center"},l.a.createElement("div",{className:"pa2-white bold m-r-10"},"VIEW CART"),l.a.createElement("div",{className:"pikx-sprite cart-icon"}))))}}]),e}(o.Component),P=Object(m.d)(d.g,Object(h.c)((function(t){var e=t.menuPage;return{cart_items:e.cart_items||[],totalPayable:e.totalPayable||0,totalCartItems:e.totalCartItems||0}}),{addToCartAction:g.a}))(O),E=a(28);a.d(e,"Home",(function(){return _}));var _=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(c.a)(this,Object(s.a)(e).call(this,t))).state={loading:!1,menuData2:[]},a}return Object(i.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this;document.title="PIKX";var e=this.props.history;this.setState({loading:!0}),localStorage.getItem("booking_id")?E.a.get("/restaurant/menu").then((function(e){e&&e.data&&e.data.success&&Array.isArray(e.data.result)&&e.data.result.length&&t.setState({menuData2:e.data.result}),t.setState({loading:!1})})).catch((function(e){console.log(e),t.setState({loading:!1})})):(e.push("/error"),this.setState({loading:!1}))}},{key:"render",value:function(){var t=this.state,e=t.loading,a=t.menuData2;return l.a.createElement("div",{className:"HomePage"},!!e&&l.a.createElement(p.a,null),l.a.createElement(P,{data:a}))}}]),e}(o.PureComponent);e.default=Object(m.d)(d.g)(_)}}]);
//# sourceMappingURL=3.4881e87e.chunk.js.map